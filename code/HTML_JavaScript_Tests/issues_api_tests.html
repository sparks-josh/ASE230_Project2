<!DOCTYPE html>
<head> </head>
<body>
  <p>Test issues.php APIs:</p>

  <div class="container"> 
      <button onclick="getIssues()">Show All Issues</button>
  </div>

  <div id="result" class="result">
    Click the button above to test the API...
  </div>

  <br>

  <form id="form" class="form">
      Issue ID: <input type="text" name="issueID"><br>
    <input type="submit" value="Submit">
  </form>

  <div id="result2" class="result2">
    Enter Issue ID above and click submit to test the API...
  </div>

  <br>

  <form id="form2" class="form2">
      Issue ID: <input type="text" name="id"><br>
      Issue Name: <input type="text" name="name"><br>
    <input type="submit" value="Submit">
  </form>

  <div id="result3" class="result3">
    Enter Issue ID and Issue Name above and click submit to test the API...
  </div>

  <br>

  <form id="form3" class="form3">
      Issue ID: <input type="text" name="id"><br>
      Issue Name: <input type="text" name="name"><br>
      Board ID: <input type="text" name="board_id"><br>
      Issue Status: <input type="text" name="status"><br>
    <input type="submit" value="Submit">
  </form>

  <div id="result4" class="result4">
    Enter old/updated Issue ID, old/updated Issue Name, old/updated Board ID, and old/updated Issue Status above and click submit to test the API...
  </div>

  <br>

  <form id="form4" class="form4">
      Issue ID: <input type="text" name="id"><br>
      Issue Status: <input type="text" name="status"><br>
    <input type="submit" value="Submit">
  </form>

  <div id="result5" class="result5">
    Enter Issue ID and updated Issue Status above and click submit to test the API...
  </div>

  <br>

  <form id="form5" class="form5">
      Issue ID: <input type="text" name="id"><br>
      Issue Comment: <input type="text" name="comment"><br>
    <input type="submit" value="Submit">
  </form>

  <div id="result6" class="result6">
    Enter Issue ID and comment above and click submit to test the API...
  </div>

  <script>
    async function getIssuesInfo() {
      try {
        const response = await fetch('../api_code/issues.php'); 
        const data = await response.text();             
        document.getElementById('result').textContent = 
          data;                      
      } catch (error) {
        document.getElementById('result').textContent =
          'Error: ' + error.message;              
      }
    }
    function getIssues() {
      getIssuesInfo();
      //My output: Found 1 issues:<br>ID: 3 - Name: TestIssue - Board: 1 - Status: Open<br>
    }

    document.querySelector('form').addEventListener('submit' , async function (event) {
      event.preventDefault(); 
        
      const form = event.target;
      const formData = new FormData(form);
      const issueID = formData.get('issueID');
        
      try {
        const response = await fetch(`../api_code/issues.php/${issueID}`);
        const data = await response.text();
        document.getElementById('result2').textContent = 
          data;
      } catch (error) {
        document.getElementById('result2').textContent =
          'Error: ' + error.message;
      }
      //My output: Found issue: 3 (Name: TestIssue, Status: Open, Board: 1)<br>
    });
    
    document.querySelector('#form2').addEventListener('submit' , async function (event) {
      event.preventDefault(); 
        
      const form = event.target;
      const formData = new FormData(form);
        
      try {
        const response = await fetch(`../api_code/issues.php/`, {
          method: 'POST',
          body: formData
        });
        const data = await response.text();
        document.getElementById('result3').textContent = 
          data;
      } catch (error) {
        document.getElementById('result3').textContent =
          'Error: ' + error.message;
      }
      //My output: {"error":"Valid bearer token required"}
    });

    document.querySelector('#form3').addEventListener('submit' , async function (event) {
      event.preventDefault(); 
        
      const form = event.target;
      const formData = new FormData(form);
        
      try {
        const response = await fetch(`../api_code/issues.php/`, {
          method: 'POST',
          body: formData
        });
        const data = await response.text();
        document.getElementById('result4').textContent = 
          data;
      } catch (error) {
        document.getElementById('result4').textContent =
          'Error: ' + error.message;
      }
      //My output: {"error":"Valid bearer token required"}
    });

    document.querySelector('#form4').addEventListener('submit' , async function (event) {
      event.preventDefault(); 
        
      const form = event.target;
      const formData = new FormData(form);
        
      try {
        const response = await fetch(`../api_code/issues.php/`, {
          method: 'POST',
          body: formData
        });
        const data = await response.text();
        document.getElementById('result5').textContent = 
          data;
      } catch (error) {
        document.getElementById('result5').textContent =
          'Error: ' + error.message;
      }
      //My output: {"error":"Valid bearer token required"}
    });

    document.querySelector('#form5').addEventListener('submit' , async function (event) {
      event.preventDefault(); 
        
      const form = event.target;
      const formData = new FormData(form);
        
      try {
        const response = await fetch(`../api_code/issues.php/`, {
          method: 'POST',
          body: formData
        });
        const data = await response.text();
        document.getElementById('result6').textContent = 
          data;
      } catch (error) {
        document.getElementById('result6').textContent =
          'Error: ' + error.message;
      }
      //My output: {"error":"Valid bearer token required"}
    });



//Sources:
//Frontend with JavaScript.md, pages 16, 19, 20, 21
//Handle_User_Inputs_and_Formats.md, pages 3, 9
    </script>
</body>
</html>